{"version":3,"sources":["constants.js","App.js","reportWebVitals.js","index.js"],"names":["KNOWN_ADDRESSES","name","domain","type","KNOWN_NETWORKS","Map","ensRegistry","EnsAddress","error","address","networkType","Error","shorten","entity","styled","span","App","useState","provider","setProvider","setDomain","result","setResult","knownAddresses","setKnownAddresses","network","setNetwork","useEffect","window","ethereum","cancel","handleChainChanged","chainId","console","log","location","reload","a","web3","Web3","eth","getChainId","id","get","fetchNetwork","on","removeListener","fetchKnownAddresses","Promise","all","map","app","ensResolve","currentProvider","registryAddress","message","addresses","fetchDomainAddress","handleChange","useCallback","val","primary","secondary","label","wide","value","onChange","heading","filter","m","index","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.94363eb1.chunk.js","sourcesContent":["export const KNOWN_ADDRESSES = [\n  { name: 'Agent', domain: 'agent.aragonpm.eth', type: 'app' },\n  { name: 'Finance', domain: 'finance.aragonpm.eth', type: 'app' },\n  {\n    name: 'Fundraising',\n    domain: 'aragon-fundraising.aragonpm.eth',\n    type: 'app',\n  },\n  { name: 'Survey', domain: 'survey.aragonpm.eth', type: 'app' },\n  { name: 'TokenManager', domain: 'token-manager.aragonpm.eth', type: 'app' },\n  { name: 'Vault', domain: 'vault.aragonpm.eth', type: 'app' },\n  { name: 'Voting', domain: 'voting.aragonpm.eth', type: 'app' },\n\n  {\n    name: 'Company',\n    domain: 'company-template.aragonpm.eth',\n    type: 'template',\n  },\n  {\n    name: 'Dandelion',\n    domain: 'dandelion-org-template.aragonpm.eth',\n    type: 'template',\n  },\n  {\n    name: 'Membership',\n    domain: 'membership-template.aragonpm.eth',\n    type: 'template',\n  },\n  {\n    name: 'Reputation',\n    domain: 'reputation-template.aragonpm.eth',\n    type: 'template',\n  },\n]\n\nexport const KNOWN_NETWORKS = new Map([\n  [\n    1,\n    {\n      ensRegistry: '0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e',\n      name: 'Ethereum Mainnet',\n      type: 'main',\n    },\n  ],\n  [\n    4,\n    {\n      ensRegistry: '0x98df287b6c145399aaa709692c8d308357bc085d',\n      name: 'Ethereum Rinkeby Testnet',\n      type: 'rinkeby',\n    },\n  ],\n  [\n    137,\n    {\n      ensRegistry: '0x3c70a0190d09f34519e6e218364451add21b7d4b',\n      name: 'Polygon Mainnet',\n      type: 'matic',\n    },\n  ],\n  [\n    80001,\n    {\n      ensRegistry: '0x431f0eed904590b176f9ff8c36a1c4ff0ee9b982',\n      name: 'Polygon Mumbai Testnet',\n      type: 'mumbai',\n    },\n  ],\n])\n","import { ensResolve } from '@aragon/wrapper'\nimport { useCallback, useEffect, useState } from 'react'\nimport {\n  Box,\n  Header,\n  Main,\n  Field,\n  SearchInput,\n  IdentityBadge,\n} from '@aragon/ui'\nimport { KNOWN_ADDRESSES, KNOWN_NETWORKS } from './constants'\nimport Web3 from 'web3'\nimport styled from 'styled-components'\n\nfunction EnsAddress({ error, address, networkType }) {\n  return (\n    <>\n      {error ? (\n        <Error>{error}</Error>\n      ) : (\n        <IdentityBadge shorten={false} entity={address} networkType={networkType} />\n      )}\n    </>\n  )\n}\n\nfunction App() {\n  const [provider, setProvider] = useState(null)\n  const [domain, setDomain] = useState('yuetloo.aragonid.eth')\n  const [result, setResult] = useState({})\n  const [knownAddresses, setKnownAddresses] = useState([])\n  const [network, setNetwork] = useState({})\n\n  useEffect(() => {\n    if (window.ethereum) {\n      let cancel = false\n      function handleChainChanged(chainId) {\n        console.log('chainChanged', chainId)\n        window.location.reload()\n      }\n\n      async function fetchNetwork() {\n        const web3 = new Web3(window.ethereum)\n        const id = await web3.eth.getChainId()\n        if (!cancel) {\n          setProvider(web3)\n          setNetwork(KNOWN_NETWORKS.get(id) || {})\n        }\n      }\n\n      fetchNetwork()\n      window.ethereum.on('chainChanged', handleChainChanged)\n\n      return () => {\n        cancel = true\n        if (window.ethereum.removeListener) {\n          window.ethereum.removeListener('chainChanged', handleChainChanged)\n        }\n      }\n    }\n  }, [])\n\n  useEffect(() => {\n    let cancel = false\n\n    if (!provider || !network.ensRegistry) return\n\n    async function fetchKnownAddresses() {\n      const addresses = await Promise.all(\n        KNOWN_ADDRESSES.map(async (app) => {\n          let address\n          let error\n          try {\n            address = await ensResolve(app.domain, {\n              provider: provider.currentProvider,\n              registryAddress: network.ensRegistry,\n            })\n          } catch (e) {\n            error = e.message\n          }\n\n          return { ...app, address, error }\n        })\n      )\n\n      if (!cancel) {\n        setKnownAddresses(addresses)\n      }\n    }\n\n    fetchKnownAddresses()\n\n    return () => {\n      cancel = true\n    }\n  }, [provider, network])\n\n  useEffect(() => {\n    let cancel = false\n    if (!provider || !domain || !network.ensRegistry) return\n\n    async function fetchDomainAddress() {\n      try {\n        const address = await ensResolve(domain, {\n          provider: provider.currentProvider,\n          registryAddress: network.ensRegistry,\n        })\n\n        if (!cancel) {\n          setResult({ address })\n        }\n      } catch (error) {\n        if (!cancel) setResult({ error: error.message })\n      }\n    }\n\n    fetchDomainAddress()\n\n    return () => {\n      cancel = true\n    }\n  }, [domain, provider, network])\n\n  const handleChange = useCallback((val) => {\n    console.log('value', val)\n    setDomain(val)\n  }, [])\n\n  return (\n    <Main>\n      <Header\n        primary=\"Aragon ENS\"\n        secondary={network.name || 'Unsupported network'}\n      />\n      <Box>\n        <Field label=\"address for\">\n          <SearchInput wide value={domain} onChange={handleChange} />\n        </Field>\n\n        <div>\n          <EnsAddress\n            error={result.error}\n            address={result.address}\n            networkType={network.type}\n          />\n        </div>\n      </Box>\n      <Box heading=\"Known Apps:\">\n        <ol>\n          {knownAddresses\n            .filter((m) => m.type === 'app')\n            .map((app, index) => {\n              return (\n                <li key={index}>\n                  <Field label={app.name}>\n                    {app.domain} ({' '}\n                    <EnsAddress\n                      error={app.error}\n                      address={app.address}\n                      networkType={network.type}\n                    />\n                    )\n                  </Field>\n                </li>\n              )\n            })}\n        </ol>\n      </Box>\n      <Box heading=\"Known Templates:\">\n        <ol>\n          {knownAddresses\n            .filter((m) => m.type === 'template')\n            .map((app, index) => {\n              return (\n                <li key={index}>\n                  <Field label={app.name}>\n                    {app.domain} ({' '}\n                    <EnsAddress\n                      error={app.error}\n                      address={app.address}\n                      networkType={network.type}\n                    />\n                    )\n                  </Field>\n                </li>\n              )\n            })}\n        </ol>\n      </Box>\n    </Main>\n  )\n}\n\nconst Error = styled.span`\n  color: red;\n`\nexport default App\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}